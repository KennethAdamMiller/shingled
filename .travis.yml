language: c
install: wget https://raw.githubusercontent.com/ocaml/ocaml-ci-scripts/master/.travis-opam.sh
script: bash -ex .travis-opam.sh
sudo: required
cache:
  directories:
    - $HOME/.opam
  before_cache:
  
    - opam remove superset_disassemblers -y
    - rm -rf $HOME/.opam/log
addons:
  apt:
    sources:
    - avsm
    packages:
    - libgmp-dev
    - libzip-dev
    - libcurl4-gnutls-dev
    - llvm-9-dev
    - time
    - clang
    - m4
    - dejagnu
env:
  global:
  - OPAMYES=true PACKAGE=superset_disassemblers TESTS=true OPAM_SWITCH=$OCAML_VERSION
  matrix:
  - OCAML_VERSION=4.07
  - OCAML_VERSION=4.09
